#!/bin/bash
#
# Editor wrapper, forcing Vim to use server mode,
# creating the server if need be.

name="VIM"
server=$(vim --serverlist | head -n1)

if [ "x${server}" = "x" ]; then
    vim --servername "${name}" "${@}"
    exit ${?}
fi

vim --remote "${@}"
